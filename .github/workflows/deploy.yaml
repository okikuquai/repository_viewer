name: deploy-to-firebase-distribution
on: push

jobs:
  android-build:
    runs-on: ubuntu-latest
    env:
      NML_BOT_SSH_KEY: ${{ secrets.NML_BOT_SSH_KEY }}
    steps:
      - uses: actions/checkout@v2

      - uses: ./.github/actions/setup-flutter

      - uses: ./.github/actions/setup-android-build

      - name: Build Android app
        run: |
          fvm flutter build apk --release

#      - name: Cleanup Gradle Cache
#        # https://docs.github.com/en/actions/guides/building-and-testing-java-with-gradle#caching-dependencies
#        run: |
#          rm -f ~/.gradle/caches/modules-2/modules-2.lock
#          rm -f ~/.gradle/caches/modules-2/gc.properties

